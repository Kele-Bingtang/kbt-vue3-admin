@use "namespace" as *;
@use "function" as *;
@use "sass:string";

$B: null;
$E: null;

/* Block 块 */
@mixin b($block) {
  $B: $admin-namespace + $common-separator + $block !global;

  .#{$B} {
    @content;
  }
}

/* Element 元素 */
@mixin e($element) {
  $E: $element !global;
  $selector: &;
  $currentSelector: "";
  @each $unit in $element {
    $currentSelector: #{$currentSelector + "." + $B + $element-separator + $unit + ","};
  }

  @if hitAllSpecialNestRule($selector) {
    @at-root {
      #{$selector} {
        #{$currentSelector} {
          @content;
        }
      }
    }
  } @else {
    @at-root {
      #{$currentSelector} {
        @content;
      }
    }
  }
}

/* Modifier 修饰符 */
@mixin m($modifier) {
  $selector: &;
  $currentSelector: "";
  @each $unit in $modifier {
    $currentSelector: #{$currentSelector + $selector + $modifier-separator + $unit + ","};
  }

  @at-root {
    #{$currentSelector} {
      @content;
    }
  }
}

@mixin is($state, $match: true) {
  $selector: $is-state-prefix + $state;
  @at-root {
    @if $match {
      &.#{$selector} {
        @content;
      }
    } @else {
      &:not(.#{$selector}) {
        @content;
      }
    }
  }
}

@mixin has($state, $match: true) {
  $selector: $has-state-prefix + $state;
  @at-root {
    @if $match {
      &.#{$selector} {
        @content;
      }
    } @else {
      &:not(.#{$selector}) {
        @content;
      }
    }
  }
}

@mixin no($state, $match: true) {
  $selector: $no-state-prefix + $state;
  @at-root {
    @if $match {
      &.#{$selector} {
        @content;
      }
    } @else {
      &:not(.#{$selector}) {
        @content;
      }
    }
  }
}

/* 多个元素 */
@mixin joins($element...) {
  $E: $admin-namespace + $common-separator;
  $elector: "";
  /* 拼接逗号 */
  @each $unit in $element {
    $elector: #{$elector + "." + $E + $unit + ","};
  }
  /* 去掉最后一个多余的逗号 */
  $elector: string.slice($elector, 1, -2);

  #{$elector} {
    @content;
  }
}
