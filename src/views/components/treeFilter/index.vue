<template>
  <div class="tree-filter-container">
    <TreeFilter
      label="label"
      title="éƒ¨é—¨åˆ—è¡¨(å•é€‰)"
      :data="data"
      :defaultValue="treeFilterValue.departmentId"
      @change="changeTreeFilter"
    />
    <TreeFilter
      title="éƒ¨é—¨åˆ—è¡¨(å¤šé€‰)"
      multiple
      label="label"
      :data="data"
      :defaultValue="treeFilterValue1.departmentId"
      @change="changeTreeFilter1"
    />
    <el-card class="descriptions-card">
      <h2>æ ‘å½¢ç­›é€‰å™¨ ğŸ“ğŸ‡ğŸˆğŸ‰</h2>
      <el-descriptions title="é…ç½®é¡¹ ğŸ“š" :column="1" border>
        <el-descriptions-item label="requestApi">è¯·æ±‚åˆ†ç±»æ•°æ®çš„ api</el-descriptions-item>
        <el-descriptions-item label="data">åˆ†ç±»æ•°æ®ï¼Œå¦‚æœæœ‰åˆ†ç±»æ•°æ®ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œ api è¯·æ±‚</el-descriptions-item>
        <el-descriptions-item label="title">treeFilter æ ‡é¢˜</el-descriptions-item>
        <el-descriptions-item label="id">é€‰æ‹©çš„idï¼Œé»˜è®¤ä¸º â€œidâ€</el-descriptions-item>
        <el-descriptions-item label="label">æ˜¾ç¤ºçš„labelï¼Œé»˜è®¤ä¸º â€œlabelâ€</el-descriptions-item>
        <el-descriptions-item label="multiple">æ˜¯å¦ä¸ºå¤šé€‰ï¼Œé»˜è®¤ä¸º false</el-descriptions-item>
        <el-descriptions-item label="defaultValue">é»˜è®¤é€‰ä¸­çš„å€¼</el-descriptions-item>
      </el-descriptions>
    </el-card>
  </div>
</template>

<script setup lang="ts" name="TreeFilterDemo">
import { ElMessage } from "element-plus";
import { TreeFilter } from "@/components";

interface Tree {
  id: number;
  label: string;
  children?: Tree[];
}

const treeFilterValue = reactive({ departmentId: "1" });
const changeTreeFilter = (val: string) => {
  ElMessage.success(`ä½ é€‰æ‹©äº† id ä¸º ${val} çš„æ•°æ®ğŸ¤”`);
  treeFilterValue.departmentId = val;
};

const treeFilterValue1 = reactive({ departmentId: ["11"] });
const changeTreeFilter1 = (val: string[]) => {
  ElMessage.success(`ä½ é€‰æ‹©äº† id ä¸º ${JSON.stringify(val)} çš„æ•°æ®ğŸ¤”`);
  treeFilterValue1.departmentId = val;
};

const data: Tree[] = [
  {
    id: 1,
    label: "Level one 1",
    children: [
      {
        id: 4,
        label: "Level two 1-1",
        children: [
          {
            id: 9,
            label: "Level three 1-1-1",
          },
          {
            id: 10,
            label: "Level three 1-1-2",
          },
        ],
      },
    ],
  },
  {
    id: 2,
    label: "Level one 2",
    children: [
      {
        id: 5,
        label: "Level two 2-1",
      },
      {
        id: 6,
        label: "Level two 2-2",
      },
    ],
  },
  {
    id: 3,
    label: "Level one 3",
    children: [
      {
        id: 7,
        label: "Level two 3-1",
      },
      {
        id: 8,
        label: "Level two 3-2",
      },
    ],
  },
];
</script>

<style lang="scss" scoped>
.tree-filter-container {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  height: 100%;

  .descriptions-card {
    flex: 1;
    height: 100%;
  }
}
</style>
